<div class="p-8">
  <!-- Detalles del Formulario -->
  <h2 class="text-3xl font-bold mb-8 text-center">Detalles del Formulario</h2>

  <!-- Formulario -->
  <form class="max-w-4xl mx-auto">
    <!-- Nombre -->
    <div class="flex flex-wrap -mx-4 mb-6">
      <div class="w-full md:w-1/2 px-4 mb-6 md:mb-0">
        <label for="formName" class="block text-gray-700 text-sm font-bold mb-2"
          >Nombre</label
        >
        <input
          type="text"
          id="formName"
          name="formname"
          [(ngModel)]="formulario.formname"
          class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
        />
      </div>
      <!-- Descripción -->
      <div class="w-full md:w-1/2 px-4">
        <label
          for="description"
          class="block text-gray-700 text-sm font-bold mb-2"
          >Descripción</label
        >
        <textarea
          id="description"
          name="description"
          [(ngModel)]="formulario.description"
          rows="3"
          class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline"
        ></textarea>
      </div>
    </div>

    <!-- Botón para agregar nuevo campo -->
    <button
      class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mb-4"
      (click)="openModalAgregar()"
    >
      Agregar Campo
    </button>

    <!-- Botón para activar/desactivar paginación -->
    <button
      class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mb-4 ml-4"
      (click)="togglePaginacion()"
    >
      {{ paginacionActivada ? "Desactivar Paginación" : "Activar Paginación" }}
    </button>

    <!-- Tabla de Campos -->
    <div class="mb-6">
      <table class="w-full">
        <!-- Encabezados de la tabla -->
        <thead>
          <tr>
            <th class="py-2 px-4 border border-gray-300">Campo</th>
            <th class="py-2 px-4 border border-gray-300">Valor</th>
            <th class="py-2 px-4 border border-gray-300">Tipo de datos</th>
            <th class="py-2 px-4 border border-gray-300">Validaciones</th>
            <th class="py-2 px-4 border border-gray-300">Acciones</th>
          </tr>
        </thead>
        <!-- Cuerpo de la tabla -->
        <tbody>
          <tr *ngFor="let campo of obtenerDatosPaginados()">
            <td class="py-2 px-4 border border-gray-300 nombreCampo">
              {{ campo.nombreCampo }}
            </td>
            <td class="py-2 px-4 border border-gray-300">
              {{ campo.valor }}
            </td>
            <td class="py-2 px-4 border border-gray-300">{{ campo.tipo }}</td>
            <td class="py-2 px-4 border border-gray-300">
              {{ campo.validaciones }}
            </td>
            <td class="py-2 px-4 border border-gray-300">
              <button
                class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-1 px-2 rounded mr-2 focus:outline-none focus:shadow-outline"
                (click)="editarCampo(campo)"
              >
                Editar
              </button>
              <button
                class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded focus:outline-none focus:shadow-outline"
                (click)="eliminarCampo(campo)"
              >
                Eliminar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Paginación -->
    <div class="flex items-center justify-between my-4">
      <button
        class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
        (click)="anteriorPagina()"
        [disabled]="paginaActual <= 1"
      >
        Anterior
      </button>
      <span>Página {{ paginaActual }} de {{ totalPaginas }}</span>
      <button
        class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
        (click)="siguientePagina()"
        [disabled]="paginaActual >= totalPaginas"
      >
        Siguiente
      </button>
    </div>

    <!-- Botón Guardar Cambios -->
    <div class="flex justify-center mt-8">
      <button
        class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
        type="button"
        (click)="guardarCambiosFormulario()"
      >
        Guardar Cambios
      </button>
    </div>
  </form>

  <!-- Modal para agregar nuevo campo -->
  <div
    class="fixed inset-0 z-40 flex items-center justify-center overflow-auto bg-black bg-opacity-50"
    id="modal"
    *ngIf="campoEditado"
  >
    <div class="bg-white rounded-lg shadow-xl m-4 max-w-2xl w-full">
      <div class="border-b px-4 py-2 flex justify-between items-center">
        <h3 class="text-lg font-semibold text-gray-900">Editar Campo</h3>
        <button
          class="text-gray-400 hover:text-gray-900"
          (click)="closeModal()"
        >
          <svg
            class="h-6 w-6 fill-current"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
          >
            <path
              d="M14.348 14.849a1 1 0 0 1-1.414 0L10 11.314l-2.934 2.935a1 1 0 0 1-1.414-1.414l2.935-2.934-2.935-2.934a1 1 0 0 1 1.414-1.414L10 8.686l2.934-2.935a1 1 0 1 1 1.414 1.414L11.414 10l2.934 2.935a1 1 0 0 1 0 1.414z"
            />
          </svg>
        </button>
      </div>
      <div class="p-6">
        <div class="mb-4">
          <label
            for="campoNombre"
            class="block text-sm font-semibold text-gray-700"
            >Nombre del Campo</label
          >
          <input
            type="text"
            id="campoNombre"
            name="campoNombre"
            class="form-input mt-1 block w-full rounded-md border-gray-300"
            [(ngModel)]="campoEditado.nombreCampo"
          />
        </div>
        <div class="mb-4">
          <label
            for="campoValor"
            class="block text-sm font-semibold text-gray-700"
            >Valor</label
          >
          <input
            type="text"
            id="campoValor"
            name="campoValor"
            class="form-input mt-1 block w-full rounded-md border-gray-300"
            [(ngModel)]="campoEditado.valor"
          />
        </div>
        <div class="mb-4">
          <label
            for="campoTipo"
            class="block text-sm font-semibold text-gray-700"
            >Tipo de Datos</label
          >
          <select
            id="campoTipo"
            name="campoTipo"
            class="form-select mt-1 block w-full rounded-md border-gray-300"
            [(ngModel)]="campoEditado.tipo"
          >
            <option value="string">String</option>
            <option value="number">Number</option>
            <option value="date">Date</option>
          </select>
        </div>
        <div class="mb-4">
          <label class="block text-sm font-semibold text-gray-700"
            >Validaciones:</label
          >
          <ul>
            <li>
              <input type="checkbox" [(ngModel)]="longitudCheck" />
              Longitud:
              <input
                *ngIf="longitudCheck"
                type="text"
                [(ngModel)]="longitudValue"
              />
            </li>
            <li>
              <input type="checkbox" [(ngModel)]="formatoCheck" />
              Formato (si aplica):
              <input
                *ngIf="formatoCheck"
                type="text"
                [(ngModel)]="formatoValue"
              />
            </li>
            <li>
              <input type="checkbox" [(ngModel)]="esEnteroCheck" />
              Entero:
            </li>
          </ul>
        </div>
        <div class="flex justify-end pt-2">
          <button
            class="px-4 py-2 bg-blue-500 text-white text-sm font-medium rounded-md hover:bg-blue-600 focus:outline-none focus:bg-blue-700"
            type="button"
            (click)="guardarCampoEditado()"
          >
            Guardar
          </button>
          <button
            class="ml-3 px-4 py-2 bg-white text-gray-700 text-sm border border-gray-300 rounded-md hover:bg-gray-100 focus:outline-none"
            type="button"
            (click)="closeModal()"
          >
            Cancelar
          </button>
        </div>
      </div>
    </div>
  </div>

  <div
    *ngIf="nuevoCampoModalVisible"
    class="fixed inset-0 z-40 flex items-center justify-center overflow-auto bg-black bg-opacity-50"
  >
    <div class="bg-white rounded-lg shadow-xl m-4 max-w-2xl w-full">
      <div class="border-b px-4 py-2 flex justify-between items-center">
        <h3 class="text-lg font-semibold text-gray-900">Agregar Nuevo Campo</h3>
        <button
          class="text-gray-400 hover:text-gray-900"
          (click)="closeModalAgregar()"
        >
          <svg
            class="h-6 w-6 fill-current"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
          >
            <path
              d="M14.348 14.849a1 1 0 0 1-1.414 0L10 11.314l-2.934 2.935a1 1 0 0 1-1.414-1.414l2.935-2.934-2.935-2.934a1 1 0 0 1 1.414-1.414L10 8.686l2.934-2.935a1 1 0 1 1 1.414 1.414L11.414 10l2.934 2.935a1 1 0 0 1 0 1.414z"
            />
          </svg>
        </button>
      </div>
      <div class="p-6">
        <div class="mb-4">
          <label
            for="nuevoCampoNombre"
            class="block text-sm font-semibold text-gray-700"
            >Nombre del Campo</label
          >
          <input
            type="text"
            id="nuevoCampoNombre"
            name="nuevoCampoNombre"
            class="form-input mt-1 block w-full rounded-md border-gray-300"
          />
        </div>
        <div class="mb-4">
          <label
            for="nuevoCampoValor"
            class="block text-sm font-semibold text-gray-700"
            >Valor</label
          >
          <input
            type="text"
            id="nuevoCampoValor"
            name="nuevoCampoValor"
            class="form-input mt-1 block w-full rounded-md border-gray-300"
          />
        </div>
        <div class="mb-4">
          <label
            for="nuevoCampoTipo"
            class="block text-sm font-semibold text-gray-700"
            >Tipo de Datos</label
          >
          <select
            id="nuevoCampoTipo"
            name="nuevoCampoTipo"
            class="form-select mt-1 block w-full rounded-md border-gray-300"
          >
            <option value="string">String</option>
            <option value="number">Number</option>
            <option value="date">Date</option>
          </select>
        </div>
        <div class="mb-4">
          <label
            for="nuevoCampoValidaciones"
            class="block text-sm font-semibold text-gray-700"
            >Validaciones</label
          >
          <ul>
            <li>
              <input type="checkbox" [(ngModel)]="longitudCheck" />
              Longitud:
              <input
                *ngIf="longitudCheck"
                type="text"
                [(ngModel)]="longitudValue"
              />
            </li>
            <li>
              <input type="checkbox" [(ngModel)]="formatoCheck" />
              Formato (si aplica):
              <input
                *ngIf="formatoCheck"
                type="text"
                [(ngModel)]="formatoValue"
              />
            </li>
            <li>
              <input type="checkbox" [(ngModel)]="esEnteroCheck" />
              Entero:
            </li>
          </ul>
        </div>
        <div class="flex justify-end pt-2">
          <button
            class="px-4 py-2 bg-blue-500 text-white text-sm font-medium rounded-md hover:bg-blue-600 focus:outline-none focus:bg-blue-700"
            type="button"
            (click)="guardarNuevoCampo()"
          >
            Guardar
          </button>
          <button
            class="ml-3 px-4 py-2 bg-white text-gray-700 text-sm border border-gray-300 rounded-md hover:bg-gray-100 focus:outline-none"
            type="button"
          >
            Cancelar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
