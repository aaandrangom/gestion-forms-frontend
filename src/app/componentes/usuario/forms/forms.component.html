<div class="p-4">
  <h2 class="text-xl font-bold mb-4 text-center">
    {{ formTemplate?.formname }}
  </h2>
  <div class="w-full max-w-2xl mx-auto">
    <div class="bg-white rounded-2xl shadow-lg">
      <h2 class="text-center text-2xl text-brand-gray font-bold mb-8">
        {{ formTemplate?.description }}
      </h2>
      <form
        *ngIf="formGroup"
        [formGroup]="formGroup"
        (ngSubmit)="onSubmit()"
        class="space-y-4 px-6 py-8"
      >
        <div class="flex flex-wrap -mx-4">
          <ng-container
            *ngFor="let fieldValue of getFieldsValues(); let i = index"
          >
            <div class="w-full sm:w-1/2 md:w-1/3 px-4 mb-6">
              <label
                for="{{ fieldValue }}"
                class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
                >{{ fieldValue }}</label
              >
              <input
                [type]="isDateField(fieldValue) ? 'date' : 'text'"
                [formControlName]="fieldValue"
                class="appearance-none block w-full bg-gray-200 text-gray-700 border border-red-300 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
                [id]="fieldValue"
                [ngClass]="{
                  'border-red-500':
                    formGroup.get(fieldValue)?.invalid &&
                    formGroup.get(fieldValue)?.touched
                }"
              />
              <p
                *ngIf="
                  formGroup.get(fieldValue)?.invalid &&
                  formGroup.get(fieldValue)?.touched
                "
                style="color: red"
                class="text-xs italic"
              >
                {{ getFieldErrorMessage(fieldValue) }}
              </p>
            </div>
            <!-- Agregamos un clearfix después de cada tercer elemento para mantener el diseño en tres columnas -->
            <div *ngIf="(i + 1) % 3 === 0" class="w-full"></div>
          </ng-container>
        </div>
        <div class="flex justify-center mt-8">
          <input
            type="file"
            (change)="onFileChange($event)"
            class="form-control"
            id="logoInput"
          />
        </div>
        <div
          *ngIf="nombreImagen"
          class="text-center"
          style="color: red"
          [innerHTML]="nombreImagen | safeHtml"
        ></div>
        <div
          *ngIf="getFieldErrorMessage('imagePath')"
          class="text-center"
          style="color: red"
        >
          {{ getFieldErrorMessage("imagePath") }}
        </div>

        <div class="flex justify-center mt-8">
          <button
            type="submit"
            class="w-full md:w-auto bg-brand-blue text-white p-3 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 disabled:opacity-50"
            [disabled]="formGroup.invalid"
          >
            Generar Documento
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
